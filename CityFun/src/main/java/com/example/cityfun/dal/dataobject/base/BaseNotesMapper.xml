<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.cityfun.dal.dao.NotesDAO">

    <resultMap id="ALL-RESULTMAP" type="com.example.cityfun.dal.dataobject.NotesDO">
        <result property="id" column="id" javaType="Long" jdbcType="BIGINT"/>
        <result property="content" column="content" javaType="String" jdbcType="VARCHAR"/>
        <result property="createdAt" column="created_at" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="title" column="title" javaType="String" jdbcType="VARCHAR"/>
        <result property="updatedAt" column="updated_at" javaType="java.util.Date" jdbcType="TIMESTAMP"/>

    </resultMap>


    <sql id="ALL-COLS">
                id,
                content,
                created_at,
                title,
                updated_at
    </sql>


    <!--dalgen start-->
    <insert id="insertNotNull" parameterType="com.example.cityfun.dal.dataobject.NotesDO">
        insert into notes
        <trim prefix="(" suffix=")" suffixOverrides=",">
                    <if test="id != null">
                        id,
                    </if>

                    <if test="content != null">
                        content,
                    </if>

                    <if test="createdAt != null">
                        created_at,
                    </if>

                    <if test="title != null">
                        title,
                    </if>

                    <if test="updatedAt != null">
                        updated_at,
                    </if>

        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
                    <if test="id != null">
                        #{id,jdbcType=BIGINT},
                    </if>
                    <if test="content != null">
                        #{content,jdbcType=VARCHAR},
                    </if>
                    <if test="createdAt != null">
                        #{createdAt,jdbcType=TIMESTAMP},
                    </if>
                    <if test="title != null">
                        #{title,jdbcType=VARCHAR},
                    </if>
                    <if test="updatedAt != null">
                        #{updatedAt,jdbcType=TIMESTAMP},
                    </if>
        </trim>
    </insert>

    <update id="updateNotNull" parameterType="com.example.cityfun.dal.dataobject.NotesDO">
        update notes
        <set>
                    <if test="content != null">
                        content = #{content,jdbcType=VARCHAR},
                    </if>
                    <if test="createdAt != null">
                        created_at = #{createdAt,jdbcType=TIMESTAMP},
                    </if>
                    <if test="title != null">
                        title = #{title,jdbcType=VARCHAR},
                    </if>
                    <if test="updatedAt != null">
                        updated_at = #{updatedAt,jdbcType=TIMESTAMP},
                    </if>
        </set>
        where id = #{id}
    </update>


    <!--dalgen end 非自动生成sql在此后面追加,方便使用IDEA直接恢复-->

</mapper>

